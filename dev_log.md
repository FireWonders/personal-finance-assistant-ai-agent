# 개발 로그

이 파일은 재무 관리 웹 애플리케이션의 개발 과정, 설계 결정사항, 기술적 고려사항을 기록합니다.

## 프로젝트 개요

**작성일**: 2026-01-05  
**목적**: 개인 재무 상태 파악 및 1년간의 자금 운용 계획 수립

## 기술 스택 선정 이유

### 백엔드: FastAPI
- **선택 이유**: Python 생태계의 강력한 데이터 처리 라이브러리(pandas, openpyxl) 활용
- **장점**: 
  - 빠른 성능 (Starlette 기반)
  - 자동 API 문서 생성 (`/docs`, `/redoc`)
  - Pydantic을 통한 강력한 타입 검증
  - 비동기 처리 지원
  
### 데이터베이스: SQLite (초기) / PostgreSQL (향후)
- **SQLite 선택 이유**: 
  - 설정 간편 (별도 서버 불필요)
  - 로컬 개발 및 개인 사용에 적합
  - 파일 기반으로 백업 용이
- **PostgreSQL 전환 고려**: 다중 사용자 지원 시

### 프론트엔드: React + Vite
- **React 선택 이유**:
  - 컴포넌트 기반 개발로 재사용성 향상
  - 풍부한 생태계 (Recharts, date-fns 등)
  - 상태 관리 용이
- **Vite 선택 이유**:
  - 매우 빠른 개발 서버 구동 (HMR)
  - 간단한 설정
  - ES 모듈 기반의 현대적인 빌드 도구

## 설계 결정사항

### 1. 데이터 모델링

#### Transaction (거래 내역)
```python
- id: 고유 식별자
- type: 거래 유형 (income/expense)
- category: 카테고리 (식비, 급여 등)
- amount: 금액
- date: 거래 날짜
- description: 설명 (선택)
- source: 출처/금융기관 (선택)
- created_at: 생성 시간
- updated_at: 수정 시간
```

**고려사항**:
- `type`을 Enum으로 정의하여 타입 안정성 확보
- `category`는 문자열로 유연하게 처리 (향후 별도 Category 테이블 고려)
- 날짜는 DateTime으로 시간 정보 포함 (상세 분석 가능)

### 2. API 설계

RESTful 원칙을 따르며 다음과 같이 구성:
- `/api/transactions/`: 거래 CRUD
- `/api/analytics/`: 통계 및 분석
- `/api/files/`: 파일 업로드/다운로드

**필터링 및 페이지네이션**:
- Query Parameter를 통해 유연한 필터링 지원
- `skip`, `limit`으로 페이지네이션 구현

### 3. 데이터 시각화

**Recharts 선택 이유**:
- React 친화적인 선언적 API
- 반응형 차트 지원
- 커스터마이징 용이

**구현 차트**:
- 라인 차트: 월별 수입/지출 추세
- 파이 차트: 카테고리별 지출 비율
- 통계 카드: 총 수입, 총 지출, 순자산

### 4. 파일 처리

**Pandas 활용**:
- CSV/Excel 파일 읽기 및 파싱
- DataFrame을 통한 데이터 검증 및 변환
- 에러 핸들링 (누락된 컬럼, 잘못된 데이터 타입 등)

**업로드 프로세스**:
1. 파일 수신 (FastAPI의 `UploadFile`)
2. Pandas로 파싱
3. 각 행을 Transaction 객체로 변환
4. 데이터베이스에 일괄 저장
5. 성공/실패 결과 반환

### 5. 보안 및 개인정보 보호

**환경 변수 관리**:
- `.env` 파일에 민감한 정보 저장 (API 키, DB URL 등)
- `python-dotenv`로 환경 변수 로드
- `.env.example`로 템플릿 제공

**Git 제외 파일**:
- 데이터베이스 파일 (`.db`)
- 업로드된 파일 (`uploads/`)
- 환경 변수 (`.env`)
- 개인정보 폴더 (`private/`, `personal_data/`)

### 6. 프론트엔드 디자인

**디자인 컨셉**: 모던하고 프리미엄한 다크 테마
- **색상 팔레트**: 
  - 다크 배경 (#0a0e1a, #141824)
  - 그라데이션 액센트 (블루-그린)
  - 의미론적 색상 (수입: 그린, 지출: 레드)
- **타이포그래피**: Inter 폰트 (가독성 및 모던함)
- **인터랙션**:
  - 호버 효과 (transform, box-shadow)
  - 부드러운 트랜지션
  - 카드 기반 레이아웃

**반응형 디자인**:
- Grid 시스템 (`grid-2`, `grid-3`, `grid-4`)
- 모바일에서는 1열로 자동 전환
- 미디어 쿼리로 폰트 크기 조정

## 금융결제원 API 연동 준비

현재는 구조만 설계되어 있으며, 실제 API 키를 받으면 다음과 같이 활용 가능:

1. **계좌 연동**: 사용자의 은행 계좌 정보 조회
2. **거래 내역 자동 수집**: API를 통해 실제 거래 내역 가져오기
3. **자동 분류**: 거래 내역을 카테고리별로 자동 분류

**구현 파일**: `backend/services/finance_api.py`

## 개발 과정에서의 도전과 해결

### 1. CORS 이슈
**문제**: 프론트엔드(localhost:5173)에서 백엔드(localhost:8000) 호출 시 CORS 에러  
**해결**: FastAPI에 `CORSMiddleware` 추가

### 2. 날짜/시간 처리
**문제**: 프론트엔드와 백엔드 간 날짜 포맷 불일치  
**해결**: 
- 백엔드: ISO 8601 형식 사용 (`datetime.isoformat()`)
- 프론트엔드: `date-fns`로 파싱 및 포매팅

### 3. CSV 한글 인코딩
**문제**: Excel에서 CSV 다운로드 시 한글 깨짐  
**해결**: BOM(Byte Order Mark) 추가 (`utf-8-sig`)

### 4. 차트 반응형
**문제**: Recharts의 고정 크기  
**해결**: `ResponsiveContainer`로 감싸서 부모 크기에 맞춤

## 향후 개선 사항

### 단기 (1-2주)
- [ ] 거래 수정 기능 UI 추가
- [ ] 카테고리 관리 기능 (사용자 정의 카테고리)
- [ ] 날짜 범위 필터 개선 (최근 7일, 30일, 1년 등 프리셋)

### 중기 (1-2개월)
- [ ] 예산 설정 기능
- [ ] 예산 초과 알림
- [ ] 월별/연간 보고서 PDF 내보내기
- [ ] 다중 계좌 지원

### 장기 (3개월+)
- [ ] 사용자 인증 (JWT)
- [ ] 다중 사용자 지원
- [ ] 금융결제원 API 실제 연동
- [ ] 자동 거래 분류 (ML 활용)
- [ ] 모바일 앱 (React Native)

## 성능 최적화 고려사항

1. **데이터베이스 인덱싱**: `date`, `type`, `category`에 인덱스 추가
2. **쿼리 최적화**: 필요한 컬럼만 조회 (SELECT *)
3. **캐싱**: 자주 조회되는 분석 데이터 캐싱 (Redis)
4. **프론트엔드 최적화**:
   - 컴포넌트 메모이제이션 (React.memo, useMemo)
   - 차트 데이터 필터링 (너무 많은 데이터 포인트 방지)
   - 이미지 최적화

## 참고 자료

- FastAPI 공식 문서: https://fastapi.tiangolo.com/
- React 공식 문서: https://react.dev/
- Recharts 문서: https://recharts.org/
- SQLAlchemy 문서: https://docs.sqlalchemy.org/

## 변경 이력

### 2026-01-05
- 초기 프로젝트 설정
- 백엔드 API 구현 (FastAPI)
- 프론트엔드 UI 구현 (React)
- CSV/Excel 파일 처리 기능
- 데이터 시각화 (Recharts)
- 문서화 (README, dev_log)
